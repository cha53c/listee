<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>
</head>
<body>
<h1><%= heading %></h1>
<input type="text" id="word">
<button type="button" id="add" value="Add Item">Add item</button>
<br>
<ul id="list">
</ul>

<label>list name</label>
<input id="listname" name="listname" type="text" placeholder="list name">
<button type="button" id="submit" value="Add Item">submit without form</button><br>

<script>

    let items = [];
    document.getElementById('add').onclick = function addItem() {
        console.log('adding an item');
        let item = document.getElementById('word').value;
        console.log(item);
        items.push(item);
        addListNode(item);
    }

    const xhr = new XMLHttpRequest();
    document.getElementById('submit').onclick = function submitList() {
        xhr.open("POST", '/lists/<%= userId %>/create/', true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        let listname = document.getElementById('listname').value;
        let list = {
            listname: listname,
            items: items
        }
        xhr.send(JSON.stringify(list));
    }

    function addListNode(item) {
        let node = document.createElement('LI');
        let textNode = document.createTextNode(item);
        node.appendChild(textNode);
        document.getElementById('list').appendChild(node);
    }


</script>
</body>
</html>